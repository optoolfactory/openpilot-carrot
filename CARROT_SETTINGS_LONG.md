당근설정-주행
------

=======
핸들버튼의 사용요령
------
* 당근은 3가지의 속도조절방식이 있습니다..
* 관련설정: 당근맨 -> 버튼설정 -> 크루즈버튼작동모드, 크루즈버튼속도단위
* 크루즈버튼작동모드
  * 0번: 은 순정과 동일한방식입니다...
  * 1번: 으로 하면, 버튼을 누르면 크루즈버튼속도단위만큼  올라갑니다..
    * 엑셀톡(엑셀을 밟았다가 떼는 방식)으로 하면 크루즈버튼속도단위만큰 올라갑니다..
    * 최초1회는 도로속도까지 올라갑니다.. (기본값은 30km/h)
    * 속도를 내리는건 길게누르는것으로 됩니다...
    * -키를 누르면 현재 주행속도로 세팅됩니다.
  * 2번으로 하면 1번과동일합니다...
    * 하지만... -키를 한번더 누르면 크루즈가 꺼집니다...
    * 단, 전방에 차가 나오거나, 신호가 감지되면 자동으로 크루즈가 켜집니다...
    * 내리막길이나, 멀리 신호/차량이 보일때 유용하게 사용됩니다..
 
전방차간거리 및 주행설정
------
* 전방차량과의 거리 설정
* 핸들리모컨의 거리설정으로 변경가능
* 차간거리 설정  
  * Carrot(당근메뉴)
    * Cruise
      * GAPx: Apply TFollow
        * x단계(1~4단계)별로 차간거리 설정 (핸들리모컨으로 설정함)
        * 각설정은 시간을 말하며, 유지거리 = 설정값*0.01초 x 속도
        * 1.2초(90) 이하로 하면, 위험할수 있으니 주행시 신중히 전방주시해야함
          * Carrot의 감속도는 최대 4.0m/s^2이다. 하지만 운전자가 급정거시에 발생되는 감속도는 5~10m/s^2에 육박한다. 그만큼 감속력이 부족하다는 뜻을 말하므로, 사람이 감속하는것 만큼 기대하면 사고가 날 수 있다.
      * Additional TFs 40km/h
        * 0~40km/h까지 점차적으로 차간거리를 늘려감
        * 예) 값을 0.2초로 설정하고, 1단계 Follow Time이 1.0초일때: 정지상태에서는 1.0초이지만, 40km/h일때는 1.2초가 됨.
      * Additional TFs 100km/h
        * 40km/h ~ 100km/h까지 점차적으로 차간거리를 늘려감
        * 예) 값을 0.4초로 설정하고, 1단계 Follow Time이 1.0초일때: 정지상태는 1.0초, 100km/h일때는 1.4초가 됨.(40km/h까지는 Additional TFs 40km/h값이 적용됨)
  * 관련설정: 주행모드 설정
    * 주행모드에 따라서, 설정된 GAP거리가 증가됨.
       
주행모드 설정
------
  * 차량의 주행모드 설정
  * 핸들리모컨의 거리설정을 길게누르면 변경됨 
  * Carrot(당근메뉴) -> Cruise
    * DRIVEMODE: Select
      * 1: 연비모드 
      * 2: 안전모드
      * 3: 일반모드
      * 4: 고속모드
        * 일반모드에서 신호감지기능만 정지됨
    * DRIVEMODE: Eco ratio (90)%
      * 연비모드일때 적용율선택
      * 가속도, 정지거리, 차간거리가 적용율만큼 적용됨
    * DRIVEMODE: Safe ratio
      * 안전모드일때 적용율선택
      * 가속도, 정지거리, 차간거리가 적용율만큼 적용됨

주행튜닝
------
  * 롱컨주행의 민감도를 설정함  
  * 당근맨 -> SET -> 주행튜닝
    * aLeadTauThreadhold (50)x0.01 m/s^2
      * 선행차의 가속도에 대한 민감도 설정
      * 숫자가 적으면 약간의 움직임에도 반응함.
    * aLeadTauNeg (150)x0.01
      * 선행차의 가속도에 대한 반응정도 설정
      * 숫자가 적으면 반응이 적극적임.
    * aLeadTauPos (150)x0.01
      * 선행차의 가속도에 대한 반응정도 설정
      * 숫자가 적으면 반응이 적극적임.
    * 현기차(Hyunda/Kia)참조
      * Kf게인(100)
        * 현기차는 100으로 고정
      * KiV게인(400)
        * 정지시 불안전한 정지거리를 보상하기 위해 400정도 세팅하는것이 좋음...
        * 0으로 해도 현기차는 잘함.
      * KpV게인(100)
        * 현기차는 100으로 고정        
      * TODO: JerkUpper/LowerLimit와 ComfortLower/UpperBound의 영향이 매우큼.
        * 적당한 수식을 세워서 넣어놨으나, 향후 좀더 편안한 주행을 위해서 조절할 필요가 있음.

정지튜닝
------
* 차량의 정지에 대한 튜닝이다.
* StopDistance(600)cm
  * 일반적으로 LEAD_DANGER_FACTOR(0.75)  x StopDistance : 400cm정도에서 정지한다.
* 정지시작가속도  (-80) x 0.01 m/s^2
  * 이로직에는 문제가 있어보이지만....
  * -0.8 m/s^2의 가속도에서 정지유지 브레이크를 걸기 시작한다.
  * 올리면 올릴수록 정지충격이 덜하지만 차량이 흐르는? 그런문제가 발생한다.
* 정지유지브레이크 -2.0 x(50%)
  * 정지를 하고 있을때 유지할 브레이크압력을 준다.
* 초기가속도2.0x(0%)  
  * 차량에 따라서 사용되는경우가 있으나, 일반적으로 사용하지 않는다.
  * 정지출발시, pid제어를 하기전에 적당한 가속도(설정값)를 주어 속도가 어느정도 올라가면 pid제어를 시작하는 방식으로, 출발시 급격한 출발이 발생할때 사용된다.
  * 일반적인 현기차는 가속도명령을 주어도 약 1초뒤에 반응하는데, 이때 급격한 출발을 하는경우가 많다.
* 완전정지시 충격방지방법
  * 정지유지브레이크: 0 (필요없는 설정같다)
  * 정지시작가속도: -40 (밀리는 경향이 있으면, 살짝낮추어준다)


주행일반(크루즈제어)
------
* 크루즈버튼설정
  * 크루즈버튼작동모드(0)
  * 크루즈버튼속도단위(10) 
* 자동크루즈설정
 * 현기차는 자동크루즈 제어를 지원한다. 이것을 사용하면 아주 편한운전이 가능하다.
 * 일시적으로 원치않을때
   * 주차장과 같은 곳에서는 아주 안좋다.
   * 핸들리모컨의 크루즈 CANCEL버튼을 눌러준다.
   * 다시 재개할때는 Res(+)/Set(-) 버튼을 눌러주면 된다.
  * 오토크루즈제어(HKG only)
    * 0: 사용안함
    * 1: 사용함
    * 2: 사용함, 브레이크/악셀 해제상태에서 전방의 장애물로 다가갈때 자동으로 크루즈ON
  * 소프트오토홀드기능(HKG only)
    * 0: 사용안함
    * 1: 사용함
    * 2: 사용함, SCC제어 (계기판에 오류가 발생하면 끈다)
  * 오토크루즈 관련 설정
    * 브레이크해제크루즈ON:주행,신호
    * 엑셀크루즈OFF:모드
    * 엑셀크루즈ON:속도
    * 크루즈ON거리
* 크루즈속도제어
  * 자동속도증가모드
  * 크루즈연비제어

